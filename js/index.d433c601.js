(function(t){function e(e){for(var l,s,o=e[0],r=e[1],c=e[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],l=!0,o=1;o<i.length;o++){var r=i[o];0!==a[r]&&(l=!1)}l&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var l={},a={index:0},n=[];function s(e){if(l[e])return l[e].exports;var i=l[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=l,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)s.d(i,l,function(e){return t[e]}.bind(null,l));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="./";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=r;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("12d0")},"12d0":function(t,e,i){"use strict";i.r(e);var l=i("7a23");const a={key:0,class:"container left status-red"},n={class:"toast center"},s={key:1,class:"container left"},o={key:0,class:"table-block margin-right-8px"},r={class:"grey-background p-l-10 p-r-10 p-b-0 p-t-0 bold"},c=Object(l["e"])("i",{"data-feather":"phone-call"},null,-1),d={class:"right"},u={class:"p-l-10 p-r-10 p-b-0 p-t-0"},p=Object(l["e"])("img",{class:"icon",src:"CTI Icons/pause.png"},null,-1),g=[p],h=Object(l["e"])("img",{class:"icon resume",src:"CTI Icons/resume-call.png"},null,-1),C=[h],m=["disabled"],b=Object(l["e"])("img",{class:"icon end",src:"CTI Icons/end-call.png"},null,-1),P=[b],I=["disabled"],O=Object(l["e"])("img",{class:"icon forward",src:"CTI Icons/call-transfer.png"},null,-1),A=[O],T=Object(l["e"])("img",{class:"icon consult",src:"CTI Icons/consult-call.png"},null,-1),D=[T],f={class:"grey-background p-l-10 p-r-10 p-b-0 p-t-0"},E=Object(l["e"])("span",{class:"bold"},"Queue : ",-1),v=Object(l["e"])("span",{class:"bold"},"Call Center : ",-1),j={class:"table-block"},N={class:"p-l-10 p-r-10 p-b-0 p-t-0"},y=Object(l["e"])("img",{class:"icon end",src:"CTI Icons/end-call.png"},null,-1),w=[y],S={class:"table-block"},U={class:"p-l-10 p-r-10 p-b-0 p-t-0"},k=Object(l["e"])("img",{class:"icon",src:"CTI Icons/pause.png"},null,-1),x=[k],_=Object(l["e"])("img",{class:"icon resume",src:"CTI Icons/resume-call.png"},null,-1),R=[_],V=["disabled"],M=Object(l["e"])("img",{class:"icon end",src:"CTI Icons/end-call.png"},null,-1),L=[M],H={class:"grey-background p-l-10 p-r-10 p-b-0 p-t-0"},W=Object(l["e"])("i",{"data-feather":"phone-call"},null,-1),G={class:"right"},F={class:"container left"},q={class:"table-block"},B={class:"p-l-10 p-b-0 p-t-0 grey-background"},z=Object(l["e"])("td",null,[Object(l["e"])("span",{class:"bold center"},"Contact ")],-1),Q=Object(l["e"])("option",{value:"null"},"Select Contact",-1),Y=["value"],J=Object(l["e"])("td",null,[Object(l["e"])("span",{class:"bold center"},"Incident ")],-1),K=Object(l["e"])("option",{value:"null"},"Select Incident",-1),$=["value"],X={style:{"vertical-align":"top"}},Z=Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["e"])("span",{class:"bold center"},"Comments ")])],-1),tt=Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["e"])("span",{class:"bold center"},"Disposition ")])],-1),et=Object(l["f"])('<option value="Interested">Interested</option><option value="Not Interested">Not Interested</option><option value="Wrong Data">Wrong Data</option><option value="Will Think">Will Think</option><option value="Callback">Callback</option><option value="No Answer">No Answer</option>',6),it=[et],lt={class:"p-l-10 p-r-10 p-b-0 p-t-0 bold grey-background wrapup-button-td",id:"wrapup-td"},at={class:"p-l-10 p-r-10 p-b-0 p-t-0 bold grey-background wrapup-button-td",id:"wrapup-td"},nt={class:"container right container-right"},st={class:"grey-background p-l-10 p-r-10 p-b-0 p-t-0"},ot={class:"grey-background p-l-10 p-r-10 p-b-0 p-t-0"},rt=Object(l["e"])("span",{class:"bold"},"Phone Number : ",-1),ct=Object(l["e"])("span",{class:"bold"},"Name : ",-1),dt={class:"p-l-10 p-r-10 p-b-0 p-t-0"},ut={class:"p-l-10 p-r-10 p-b-0 p-t-0"},pt={class:"p-l-10 p-r-10 p-b-0 p-t-0"},gt={class:"p-l-10 p-r-10 p-b-0 p-t-0"},ht={class:"p-l-10 p-r-10 p-b-0 p-t-0"},Ct={key:0,class:"p-l-10 p-b-0 p-t-0 grey-background bold"},mt={class:"bold"},bt={class:"p-l-10 p-b-0 p-t-0 grey-background"},Pt=Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["e"])("span",{class:"bold center"},"Status ")])],-1),It=Object(l["e"])("option",{value:"ready",class:"status-green"},"Ready",-1),Ot=["value"],At=Object(l["e"])("option",{value:"work",disabled:""},"Wrap Up",-1),Tt=Object(l["e"])("option",{value:"not_ready",disabled:""},"Not Ready",-1),Dt=Object(l["e"])("option",{value:"talking",disabled:""},"Talking",-1),ft={class:"p-0 grey-background"},Et={class:"logout-button-table"},vt={class:"p-l-10 p-r-10 p-b-0 p-t-0 bold grey-background logout-button-td",id:"logout-td"},jt=["disabled"],Nt=["disabled"],yt=Object(l["e"])("option",{value:"0",disabled:""},"Logged In",-1),wt=["value"],St={class:"p-l-10 p-r-10 p-b-0 p-t-0"},Ut=Object(l["e"])("img",{class:"icon",src:"CTI Icons/login-icon.png"},null,-1),kt=[Ut],xt={class:"loading",id:"loading"};function _t(t,e,i,p,h,b){return Object(l["i"])(),Object(l["d"])(l["a"],null,[!t.systemUp||t.isError?(Object(l["i"])(),Object(l["d"])("div",a,[Object(l["e"])("div",n,Object(l["k"])(t.systemDownMessage),1)])):Object(l["c"])("",!0),t.activeCall||t.consultCallActive?(Object(l["i"])(),Object(l["d"])("div",s,[t.activeCall?(Object(l["i"])(),Object(l["d"])("table",o,[Object(l["e"])("tr",null,[Object(l["e"])("td",r,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[Object(l["e"])("td",null,[c,Object(l["g"])(Object(l["k"])(t.currentCustomerPhoneNumber),1)])]),Object(l["e"])("tr",null,[Object(l["e"])("td",d,Object(l["k"])(t.timerFormat(t.callTimingHour))+" : "+Object(l["k"])(t.timerFormat(t.callTimingMinutes))+" : "+Object(l["k"])(t.timerFormat(t.callTimingSeconds)),1)])])]),Object(l["e"])("td",u,[Object(l["o"])(Object(l["e"])("button",{title:"Call Hold",onClick:e[0]||(e[0]=e=>t.putOnHold(!0))},g,512),[[l["n"],!t.onHold]]),Object(l["o"])(Object(l["e"])("button",{title:"Call Resume",onClick:e[1]||(e[1]=e=>t.playFromHold(!0))},C,512),[[l["n"],t.onHold]]),Object(l["o"])(Object(l["e"])("button",{title:"Call End",onClick:e[2]||(e[2]=e=>t.callEnd(!0)),disabled:t.onHold},P,8,m),[[l["n"],!t.consultCallActive]])]),Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("input",{type:"text",maxlength:"15",class:"phone_number",disabled:t.onHold,"onUpdate:modelValue":e[3]||(e[3]=e=>t.dialedNumber=e)},null,8,I),[[l["m"],t.dialedNumber]])]),Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("button",{title:"Call Forward",onClick:e[4]||(e[4]=(...e)=>t.forwardCall&&t.forwardCall(...e))},A,512),[[l["n"],!t.onHold]]),Object(l["o"])(Object(l["e"])("button",{title:"Call Consult",onClick:e[5]||(e[5]=(...e)=>t.consultCall&&t.consultCall(...e)),disabled:!1},D,512),[[l["n"],!t.consultCallActive&&!t.onHold]])]),Object(l["o"])(Object(l["e"])("td",f,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[Object(l["e"])("td",null,[E,Object(l["e"])("span",null,Object(l["k"])(t.currentQueue?t.currentQueue.length>20?t.currentQueue.substring(0,20)+"...":t.currentQueue:""),1)])]),Object(l["e"])("tr",null,[Object(l["e"])("td",null,[v,Object(l["e"])("span",null,Object(l["k"])(t.currentCallCenter),1)])])])],512),[[l["n"],t.loggedIn]])])])):Object(l["c"])("",!0),Object(l["o"])(Object(l["e"])("table",j,[Object(l["e"])("tr",null,[Object(l["e"])("td",N,[Object(l["e"])("button",{title:"Call End",onClick:e[6]||(e[6]=e=>t.callEnd(!1))},w)])])],512),[[l["n"],t.consultCallIniated]]),Object(l["o"])(Object(l["e"])("table",S,[Object(l["e"])("tr",null,[Object(l["o"])(Object(l["e"])("td",U,[Object(l["o"])(Object(l["e"])("button",{title:"Call Hold",onClick:e[7]||(e[7]=e=>t.putOnHold(!1))},x,512),[[l["n"],!t.consultOnHold]]),Object(l["o"])(Object(l["e"])("button",{title:"Call Resume",onClick:e[8]||(e[8]=e=>t.playFromHold(!1))},R,512),[[l["n"],t.consultOnHold]]),Object(l["e"])("button",{title:"Call End",onClick:e[9]||(e[9]=e=>t.callEnd(!1)),disabled:t.consultOnHold},L,8,V)],512),[[l["n"],t.consultCallActive]]),Object(l["o"])(Object(l["e"])("td",H,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[Object(l["e"])("td",null,[W,Object(l["g"])(Object(l["k"])(t.consultCallNumber),1)])]),Object(l["e"])("tr",null,[Object(l["e"])("td",G,Object(l["k"])(t.timerFormat(t.consultCallTimingHour))+" : "+Object(l["k"])(t.timerFormat(t.consultCallTimingMinutes))+" : "+Object(l["k"])(t.timerFormat(t.consultCallTimingSeconds)),1)])])],512),[[l["n"],t.consultCallActive]])])],512),[[l["n"],t.consultCallActive]])])):Object(l["c"])("",!0),Object(l["o"])(Object(l["e"])("div",F,[Object(l["e"])("table",q,[Object(l["e"])("tr",null,[Object(l["e"])("td",B,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[z,Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("select",{"onUpdate:modelValue":e[10]||(e[10]=e=>t.selectedContactId=e)},[Q,(Object(l["i"])(!0),Object(l["d"])(l["a"],null,Object(l["j"])(t.listOfCurrentContacts,t=>(Object(l["i"])(),Object(l["d"])("option",{value:t.id,key:t.id},Object(l["k"])(t.value),9,Y))),128))],512),[[l["l"],t.selectedContactId]])])]),Object(l["e"])("tr",null,[J,Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("select",{"onUpdate:modelValue":e[11]||(e[11]=e=>t.selectedIncidentId=e)},[K,(Object(l["i"])(!0),Object(l["d"])(l["a"],null,Object(l["j"])(t.listOfCurrentIncident,t=>(Object(l["i"])(),Object(l["d"])("option",{value:t.id,key:t.id},Object(l["k"])(t.value),9,$))),128))],512),[[l["l"],t.selectedIncidentId]])])])])]),Object(l["o"])(Object(l["e"])("td",X,[Object(l["e"])("table",null,[Z,Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("textarea",{rows:"3",cols:"30","onUpdate:modelValue":e[12]||(e[12]=e=>t.comments=e)},"\n\n                ",512),[[l["m"],t.comments]])])])])],512),[[l["n"],t.campaignWrapUpPending]]),Object(l["o"])(Object(l["e"])("td",null,[Object(l["e"])("table",null,[tt,Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("select",{"onUpdate:modelValue":e[13]||(e[13]=e=>t.disposition=e)},it,512),[[l["l"],t.disposition]])])]),Object(l["e"])("tr",null,[Object(l["o"])(Object(l["e"])("td",lt,[Object(l["e"])("button",{id:"wrapup-button",class:"wrapup-button",onClick:e[14]||(e[14]=e=>t.loggingCall(null,null,null,"update",!0,null,null))},"Wrap Up ")],512),[[l["n"],t.campaignWrapUpPending]])])])],512),[[l["n"],t.campaignWrapUpPending]]),Object(l["o"])(Object(l["e"])("td",at,[Object(l["e"])("button",{id:"wrapup-button",class:"wrapup-button",onClick:e[15]||(e[15]=e=>t.loggingCall(null,null,null,"update",!0,null,null))},"Wrap Up ")],512),[[l["n"],!t.campaignWrapUpPending]])])])],512),[[l["n"],"talking"!=t.currentStatus&&1==t.wrapUpPending||1==t.campaignWrapUpPending]]),Object(l["e"])("div",nt,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[Object(l["o"])(Object(l["e"])("td",st,[Object(l["e"])("span",null,[Object(l["e"])("p",null,Object(l["k"])(t.campaignCallMessage),1)])],512),[[l["n"],(t.campaignCallAlerting||t.campaignCallInitiated)&&t.loggedIn]]),Object(l["o"])(Object(l["e"])("td",ot,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[Object(l["e"])("td",null,[rt,Object(l["e"])("span",null,Object(l["k"])(t.currentCustomerPhoneNumber),1)])]),Object(l["e"])("tr",null,[Object(l["e"])("td",null,[ct,Object(l["e"])("span",null,Object(l["k"])(t.campaignCallBuddyName),1)])])])],512),[[l["n"],(t.campaignCallAlerting||t.campaignCallInitiated)&&t.loggedIn]]),Object(l["o"])(Object(l["e"])("td",dt,[Object(l["e"])("img",{class:"icon",onClick:e[16]||(e[16]=(...e)=>t.pickupCall&&t.pickupCall(...e)),src:"CTI Icons/incoming-call.png"})],512),[[l["n"],t.loggedIn&&!t.inWrapUpState&&!t.activeCall&&(t.callAlerting||t.consultCallAlerting)]]),Object(l["o"])(Object(l["e"])("td",ut,[Object(l["e"])("img",{class:"icon",onClick:e[17]||(e[17]=(...e)=>t.pickupCampaignCall&&t.pickupCampaignCall(...e)),src:"CTI Icons/incoming-call.png"})],512),[[l["n"],t.campaignCallAlerting&&t.loggedIn]]),Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("input",{type:"text",maxlength:"15",class:"phone_number",disabled:!1,"onUpdate:modelValue":e[18]||(e[18]=e=>t.dialedNumber=e)},null,512),[[l["n"],t.loggedIn&&!t.inWrapUpState&&0==t.wrapUpPending&&!t.campaignCallAlerting&&!t.campaignCallInitiated&&!t.activeCall&&!t.callAlerting&&!t.consultCallAlerting&&!t.consultCallActive&&!t.outgoingCallInitiated&&!t.campaignWrapUpPending],[l["m"],t.dialedNumber]])]),Object(l["o"])(Object(l["e"])("td",pt,[Object(l["e"])("img",{class:"icon",onClick:e[19]||(e[19]=e=>t.outgoingCall(e)),src:"CTI Icons/outgoing-call.png"})],512),[[l["n"],t.loggedIn&&!t.inWrapUpState&&0==t.wrapUpPending&&!t.campaignCallAlerting&&!t.campaignCallInitiated&&!t.activeCall&&!t.callAlerting&&!t.consultCallAlerting&&!t.consultCallActive&&!t.outgoingCallInitiated&&!t.campaignWrapUpPending]]),Object(l["o"])(Object(l["e"])("td",gt,[Object(l["e"])("img",{onClick:e[20]||(e[20]=e=>t.callEnd(!0)),class:"icon end",src:"CTI Icons/end-call.png"})],512),[[l["n"],t.loggedIn&&!t.inWrapUpState&&!t.campaignCallAlerting&&0==t.wrapUpPending&&!t.activeCall&&!t.callAlerting&&!t.consultCallAlerting&&!t.consultCallActive&&t.outgoingCallInitiated]]),Object(l["o"])(Object(l["e"])("td",ht,[Object(l["e"])("img",{onClick:e[21]||(e[21]=e=>t.campaignCallEnd()),class:"icon end",src:"CTI Icons/end-call.png"})],512),[[l["n"],(t.campaignCallAlerting||t.campaignCallInitiated)&&t.loggedIn]]),t.loggedIn?(Object(l["i"])(),Object(l["d"])("td",Ct,[Object(l["e"])("table",null,[Object(l["e"])("tr",null,[Object(l["e"])("td",mt,Object(l["k"])(t.fullName),1)]),Object(l["e"])("tr",null,[Object(l["e"])("td",null,Object(l["k"])(t.agentExtension),1)])])])):Object(l["c"])("",!0),Object(l["o"])(Object(l["e"])("td",bt,[Object(l["e"])("table",null,[Pt,Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("select",{onChange:e[22]||(e[22]=e=>t.statusChange()),"onUpdate:modelValue":e[23]||(e[23]=e=>t.currentStatus=e),class:Object(l["h"])({"status-red":"ready"!=t.currentStatus,"status-green":"ready"==t.currentStatus})},[It,(Object(l["i"])(!0),Object(l["d"])(l["a"],null,Object(l["j"])(t.userStatus,t=>(Object(l["i"])(),Object(l["d"])("option",{class:"status-red",value:t.id,key:t.id},Object(l["k"])(t.label),9,Ot))),128)),At,Tt,Dt],34),[[l["l"],t.currentStatus]])])])])],512),[[l["n"],t.loggedIn]]),Object(l["o"])(Object(l["e"])("td",ft,[Object(l["e"])("table",Et,[Object(l["e"])("tr",null,[Object(l["e"])("td",vt,[Object(l["o"])(Object(l["e"])("button",{id:"logout-button",class:"logout-button",disabled:"talking"==t.currentStatus||"work"==t.currentStatus,onClick:e[24]||(e[24]=e=>t.logoutClicked=!0)},"Logout ",8,jt),[[l["n"],t.loggedIn]])])]),Object(l["e"])("tr",null,[Object(l["e"])("td",null,[Object(l["o"])(Object(l["e"])("select",{id:"logout-select",required:"","onUpdate:modelValue":e[25]||(e[25]=e=>t.currentLogoutStatus=e),disabled:"talking"==t.currentStatus,onChange:e[26]||(e[26]=e=>t.logout())},[yt,(Object(l["i"])(!0),Object(l["d"])(l["a"],null,Object(l["j"])(t.logoutStatus,t=>(Object(l["i"])(),Object(l["d"])("option",{value:t.id,key:t.id},Object(l["k"])(t.label),9,wt))),128))],40,Nt),[[l["l"],t.currentLogoutStatus],[l["n"],t.logoutClicked]])])])])],512),[[l["n"],t.loggedIn]]),Object(l["o"])(Object(l["e"])("td",St,[Object(l["e"])("button",{onClick:e[27]||(e[27]=(...e)=>t.openLogin&&t.openLogin(...e))},kt)],512),[[l["n"],t.systemUp&&!t.loggedIn]])])])]),Object(l["o"])(Object(l["e"])("div",xt,"Loading…",512),[[l["n"],t.loading]])],64)}i("14d9"),i("b7ef");var Rt=i("bc3a"),Vt=i.n(Rt),Mt=(i("6672"),i("7a51")),Lt=i.n(Mt),Ht={name:"Bar",data:function(){return{logoutClicked:!1,Finesse_FQDN:"ccuccxtest.lutrijabih.ba:",Port_SSL:"8445",systemUp:!0,isError:!1,iExtensionReport:null,contactId:null,incidentId:null,listOfCurrentIncident:[],listOfCurrentContacts:[],selectedIncidentId:null,selectedContactId:null,systemDownMessage:null,oauth:null,activeCall:!1,loading:!1,loggedIn:!1,loginPopup:null,callCustomerPopup:null,dialpadPopup:null,onHold:!1,consultOnHold:!1,IUserInterfaceContext:null,IPopupWindowContext:null,extensionProvider:null,contextGlobal:null,token:null,restURL:null,interfaceUrl:null,callType:null,currentCallLogId:null,callTimingHour:0,callTimingMinutes:0,callTimingSeconds:0,consultCallTimingHour:0,consultCallTimingMinutes:0,consultCallTimingSeconds:0,consultCallTimerReference:null,timerReference:null,username:null,password:null,fullName:null,agentExtension:1491,teamName:null,userStatus:[],logoutStatus:[],currentStatus:null,previousStatus:null,currentLogoutStatus:"0",domain:null,port:null,_jwClient:null,currentCallID:null,currentConsultCallID:null,currentCustomerPhoneNumber:null,slicedPhoneNumber:null,currentQueue:"",currentCallCenter:null,callAlerting:!1,consultCallAlerting:!1,consultCallIniated:!1,outgoingCallInitiated:!1,loginActionSubscribed:!1,callCustomerSubscribed:!1,workspaceSavingSubscribed:!1,phoneNumberSelectedSubscribed:!1,dialedNumber:null,consultCallActive:!1,consultCallNumber:null,consultMessage:null,rnowSession:null,rnowAgentId:null,rnowRestURL:null,rnowLang:null,inWrapUpState:!1,wrapUpPending:!1,sessionId:null,campaignCallAlerting:!1,campaignCallInitiated:!1,campaignCallFailed:!1,campaignCallBuddyName:"",campaignCallID:null,campaignCallMessage:"",directPreviewCampaign:!1,disposition:null,comments:null,campaignWrapUpPending:!1,predictiveCampaign:!1}},created(){this.domain=this.Finesse_FQDN,this.port=this.Port_SSL,this.url="https://"+this.domain+":"+this.port+"/finesse/api/";var t=this;this.loading=!0,window.parent.document.body.addEventListener("click",(function(e){t.logoutClicked=!1}),!0),document.body.addEventListener("click",(function(e){"logout-button"!=e.target.id&&"logout-icon"!=e.target.id&&"logout-td"!=e.target.id&&"logout-select"!=e.target.id&&(t.logoutClicked=!1)}),!0),this.systemInfo().then(e=>{var i=Lt.a.parse(e.data);"IN_SERVICE"!=i.SystemInfo.status?(t.systemDownMessage="Cisco Finesse Server seems down, please refersh the page. If problem presists, kindly contact administrator.",t.systemUp=!1):ORACLE_SERVICE_CLOUD.extension_loader.load("CTI_INTEGRATION_APP_ID","1.0").then((function(e){t.extensionProvider=e,t.extensionProvider.getGlobalContext().then((function(e){t.contextGlobal=e,t.rnowAgentId=e.getAccountId(),t.rnowRestURL=e.getInterfaceServiceUrl("REST"),t.rnowLang=e.getLanguage(),t.interfaceUrl=e.getInterfaceUrl(),e.getSessionToken().then((function(e){t.rnowSession=e,t.getExtensionNumber().then(e=>{t.loading=!1,null==e.data.customFields.c.cti_extension?(t.systemDownMessage="Cisco agent extension number is not linked with your staff account. Please add extension number to your staff account and try again.",t.systemUp=!1):t.agentExtension=e.data.customFields.c.cti_extension}).catch(e=>{t.systemDownMessage="Error occurred. Please try after sometime.",t.systemUp=!1,t.loading=!1})}))})),e.registerUserInterfaceExtension((function(e){t.IUserInterfaceContext=e,e.getModalWindowContext().then((function(e){t.IPopupWindowContext=e}))}))}))}).catch(t=>{this.loading=!1,this.systemDownMessage="Cisco Finesse Server seems down, please refersh the page. If problem presists, kindly contact administrator.",this.systemUp=!1})},methods:{timerFormat:function(t){return(t<10?"0":"")+t},notifyMe:function(t,e){if("Notification"in window)if("granted"===Notification.permission){var i={body:e,icon:"favicon.ico",dir:"ltr"};new Notification(t,i)}else"denied"!==Notification.permission&&Notification.requestPermission((function(i){if("permission"in Notification||(Notification.permission=i),"granted"===i){var l={body:e,icon:"favicon.ico",dir:"ltr"};new Notification(t,l)}}));else alert("This browser does not support desktop notification")},eventDisconnect:function(){this._jwClient&&(this._jwClient.disconnect(),this._jwClient=null)},eventConnect:function(t,e){this.loading=!0;var i=this;if(window.jabberwerx){var l=t+"@"+this.domain;this._jwClient=new jabberwerx.Client("cisco");var a={httpBindingURL:"https://"+this.domain+":"+this.port+"/http-bind",errorCallback:this.onClientError,successCallback:function(){i.loading=!1,i.getUserInfo(t,e).then(l=>{var a=l.data,n=Lt.a.parse(a);console.log(n),"LOGOUT"!=n.User.state?confirm("It seems you already logged in OSC CTI, please click 'Yes' to login here or 'No' to cancel.")?i.defaultLogout(t,e).then(l=>{i.login(t,e)}).catch(t=>{console.log(t)}):(i.loginPopup.close(),i.loading=!1):i.login(t,e)}).catch(t=>{console.log(t),i.loading=!1}),console.log("Success callback after Jabber Event Connect "),console.log(i._jwClient.resourceName)}};jabberwerx._config.unsecureAllowed=!0,this._jwClient.event("messageReceived").bindWhen("event[xmlns='http://jabber.org/protocol/pubsub#event'] items item notification",this._eventHandler),this._jwClient.event("clientStatusChanged").bind((function(t){t.data.next==jabberwerx.Client.status_connected?console.log("Sign In Handler"):t.data.next==jabberwerx.Client.status_disconnected&&(console.log("Sign out Handler"),this.onClientError(t.data),this.eventDisconnect())})),this._jwClient.connect(l,e,a)}else alert("CAXL library not found. Please download from http://developer.cisco.com/web/xmpp/resources")},onClientError:function(t){this.loading=!1,console.log(t),"error"==t.nodeName&&"not-authorized"==t.childNodes[0].nodeName?(this.isError=!0,this.systemDownMessage="Either username or password is incorrect, please enter correct username and password.",this.loginPopup.close(),this.loading=!1,this.notifyMe("Error","Either username or password is incorrect, please enter correct username and password.")):"stream:error"==t.nodeName&&"service-unavailable"==t.childNodes[0].nodeName&&(this.systemUp=!1,this.systemDownMessage="Service Unavailable or please check your VPN Connection",this.loginPopup.close(),this.loading=!1,this.notifyMe("Error","Service Unavailable or please check your VPN Connection"))},_eventHandler:function(t){let e=Lt.a.parse(t.selected.firstChild.data),i=e.Update.data;if(console.log(i),i.user)this.fullName=i.user.firstName+" "+i.user.lastName,this.teamName=i.user.teamName,"READY"==i.user.state?(this.currentStatus="ready",this.previousStatus="ready",this.loggedIn=!0):"NOT_READY"==i.user.state?(this.loggedIn=!0,i.user.reasonCode&&0==i.user.reasonCode.forAll?(this.currentStatus=i.user.reasonCode.id,this.previousStatus=i.user.reasonCode.id):(this.currentStatus="not_ready",this.previousStatus="not_ready"),"Agent Logon"==i.user.reasonCode.label&&this.reasonCodes()):"LOGOUT"==i.user.state?(this.loggedIn=!1,this.activeCall=!1,this.onHold=!1,this.currentLogoutStatus=null,this.stopCallTiming(),window.location.reload()):"TALKING"==i.user.state?(this.currentStatus="talking",this.previousStatus="talking"):"WORK"==i.user.state&&(this.currentStatus="work",this.previousStatus="work"),"READY"==i.user.state&&1==this.wrapUpPending&&0==this.campaignWrapUpPending&&(this.wrapUpPending=!1),this.systemUp=!0,this.systemDownMessage=null;else if(i.dialogs){this.systemUp=!0,this.systemDownMessage=null;let t=!1;if(i.dialogs.Dialog.mediaProperties&&i.dialogs.Dialog.mediaProperties.callType)if("OFFERED"==i.dialogs.Dialog.mediaProperties.callType){t=!0;let e=!1,l=0,a=!1;this.currentCallID=i.dialogs.Dialog.id,this.sessionId=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[4].value;for(let t=0;t<i.dialogs.Dialog.participants.Participant.length;t++)"DROPPED"==i.dialogs.Dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&i.dialogs.Dialog.participants.Participant[t].mediaAddress==this.agentExtension&&(e=!0),"ALERTING"==i.dialogs.Dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&i.dialogs.Dialog.participants.Participant[t].mediaAddress==this.agentExtension&&(a=!0),"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&l++;e?(this.stopCallTiming(),this.activeCall=!1,this.onHold=!1,this.loading=!1,this.dialedNumber=null,this.inWrapUpState=!1,this.queueName=null,this.callAlerting=!1,this.campaignCallAlerting=!1,this.campaignCallInitiated=!1,this.campaignWrapUpPending=!1,this.wrapUpPending=!1):a&&2==l&&(this.callAlerting=!0,this.currentCustomerPhoneNumber=i.dialogs.Dialog.fromAddress,this.notifyMe("Incomming Call","Called Forwarded from Agent: "+ForwardStartedAgent+" for Customer: "+i.dialogs.Dialog.fromAddress))}else if("OUT"==i.dialogs.Dialog.mediaProperties.callType){t=!0;let e=!1,l=!1,a=!1;"object"===typeof i.dialogs.Dialog.participants.Participant&&"DROPPED"==i.dialogs.Dialog.participants.Participant.state&&(e=!0);for(let t=0;t<i.dialogs.Dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&i.dialogs.Dialog.participants.Participant[t].mediaAddress==this.agentExtension?"DROPPED"==i.dialogs.Dialog.participants.Participant[t].state?e=!0:"ALERTING"==i.dialogs.Dialog.participants.Participant[t].state&&(l=!0):"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&i.dialogs.Dialog.participants.Participant[t].mediaAddress!=this.agentExtension&&"INITIATED"==i.dialogs.Dialog.participants.Participant[t].state&&(a=!0);e&&(this.onHold=!1,this.currentCustomerPhoneNumber=null,this.dialedNumber=null,this.queueName=null,this.loading=!1,this.callAlerting=!1,console.log("Dropped when Alerting"),this.stopCallTiming(),this.activeCall&&this.loggingCall(null,null,2,"update",!1,null,this.callTimingSeconds+60*this.callTimingMinutes+3600*this.callTimingHour),this.outgoingCallInitiated=!1,this.activeCall=!1),l&&a&&(this.currentConsultCallID=i.dialogs.Dialog.id,this.sessionId=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[4].value,this.consultMessage="Consult Call Coming...",this.notifyMe("Incomming Call","Consult Call Coming "),this.consultCallAlerting=!0,this.consultOnHold=!1)}else if("CONSULT"==i.dialogs.Dialog.mediaProperties.callType){t=!0;let e=!1,l=!1,a=!1;"object"===typeof i.dialogs.Dialog.participants.Participant&&("WRAP_UP"==i.dialogs.Dialog.participants.Participant.state&&(a=!0),"DROPPED"==i.dialogs.Dialog.participants.Participant.state&&(e=!0));for(let t=0;t<i.dialogs.Dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&i.dialogs.Dialog.participants.Participant[t].mediaAddress==this.agentExtension&&("DROPPED"==i.dialogs.Dialog.participants.Participant[t].state?e=!0:"ALERTING"==i.dialogs.Dialog.participants.Participant[t].state&&(l=!0));l&&(this.currentConsultCallID=i.dialogs.Dialog.id,this.sessionId=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[4].value,this.consultMessage="Consult Call Coming...",this.notifyMe("Incomming Call","Consult Call Coming "),this.consultCallAlerting=!0,this.consultOnHold=!1),a&&(this.loggingCall(null,null,2,"update",!1,null,this.consultCallTimingSeconds+60*this.consultCallTimingMinutes+3600*this.consultCallTimingHour),this.stopConsultCallTiming()),e&&(this.consultMessage=null,this.consultCallActive=!1,this.currentConsultCallID=null,this.consultCallAlerting=!1,this.dialedNumber=null,this.consultCallNumber=null,this.loading=!1,this.stopConsultCallTiming(),this.activeCall&&this.playFromHold(!0))}else if("AGENT_INSIDE"==i.dialogs.Dialog.mediaProperties.callType){t=!0;let e=!1;"object"===typeof i.dialogs.Dialog.participants.Participant&&"DROPPED"==i.dialogs.Dialog.participants.Participant.state&&i.dialogs.Dialog.participants.Participant.mediaAddress==this.agentExtension&&(e=!0),console.log("after if: "+e);for(let t=0;t<i.dialogs.Dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&i.dialogs.Dialog.participants.Participant[t].mediaAddress==this.agentExtension?"DROPPED"==i.dialogs.Dialog.participants.Participant[t].state&&(e=!0,console.log("Inside dropped")):"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[t].mediaAddressType&&(i.dialogs.Dialog.participants.Participant[t].mediaAddress,this.agentExtension);e&&(console.log("last block"),this.consultCallIniated=!1,this.consultMessage=null,this.consultCallActive=!1,this.currentConsultCallID=null,this.dialedNumber=null,this.consultOnHold=!1,this.consultCallAlerting=!1,this.loading=!1,this.callType=null,this.outgoingCallInitiated=!1,console.log(this.activeCall),console.log(this.callAlerting),console.log(this.outgoingCallInitiated))}else if("OTHER_IN"==i.dialogs.Dialog.mediaProperties.callType){t=!0;let e=!1,l=!1;"ALERTING"==i.dialogs.Dialog.state&&(e=!0),i.dialogs.Dialog.mediaProperties.queueName&&(this.currentQueue=i.dialogs.Dialog.mediaProperties.queueName),this.currentCallID=i.dialogs.Dialog.id,this.sessionId=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[4].value;for(let t=0;t<i.dialogs.Dialog.participants.Participant.length;t++)"DROPPED"==i.dialogs.Dialog.participants.Participant[t].state&&(l=!0);l&&(this.campaignWrapUpPending=!0,this.campaignCallAlerting=!1,this.campaignCallInitiated=!1,this.campaignCallID=null,this.campaignCallBuddyName=null,this.currentCustomerPhoneNumber=null,this.loading=!1,this.activeCall=!1,this.directPreviewCampaign=!1),console.log(this.directPreviewCampaign),console.log(this.wrapUpPending),console.log(this.currentStatus),e&&(this.campaignCallAlerting=!0,this.directPreviewCampaign=!0,this.campaignCallMessage="",this.campaignCallID=i.dialogs.Dialog.id,this.currentCustomerPhoneNumber=i.dialogs.Dialog.fromAddress)}else if("OUTBOUND_DIRECT_PREVIEW"==i.dialogs.Dialog.mediaProperties.callType){let t=!1;"object"===typeof i.dialogs.Dialog.participants.Participant&&"DROPPED"==i.dialogs.Dialog.participants.Participant.state&&(t=!0),t&&(this.campaignCallAlerting=!1,this.campaignCallInitiated=!1,this.campaignCallID=null,this.campaignCallBuddyName=null,this.currentCustomerPhoneNumber=null)}if(!t)if("ACTIVE"==i.dialogs.Dialog.state||"DROPPED"==i.dialogs.Dialog.state){if(i.dialogs.Dialog.participants&&i.dialogs.Dialog.participants.Participant){i.dialogs.Dialog.mediaProperties.queueName&&(this.currentQueue=i.dialogs.Dialog.mediaProperties.queueName),this.currentCallID=i.dialogs.Dialog.id,this.sessionId=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[4].value;let t=!1;for(let e=0;e<i.dialogs.Dialog.participants.Participant.length;e++)"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[e].mediaAddressType&&"DROPPED"==i.dialogs.Dialog.participants.Participant[e].state&&(t=!0);t&&(this.currentCustomerPhoneNumber=null,this.queueName=null,this.callAlerting=!1,this.activeCall=!1,this.onHold=!1,this.dialedNumber=null,this.loading=!1,0==this.inWrapUpState&&(this.loggingCall(null,null,2,"update",!1,null,this.callTimingSeconds+60*this.callTimingMinutes+3600*this.callTimingHour),this.stopCallTiming()),this.inWrapUpState=!1)}}else if("ALERTING"==i.dialogs.Dialog.state&&"OUTBOUND_DIRECT_PREVIEW"!=i.dialogs.Dialog.mediaProperties.callType&&i.dialogs.Dialog.participants&&i.dialogs.Dialog.participants.Participant){var l;this.currentQueue=i.dialogs.Dialog.mediaProperties.queueName,this.currentCallID=i.dialogs.Dialog.id,this.sessionId=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[4].value,this.currentCallCenter=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[1].value;let t=!1,e=0,n=!1;for(let l=0;l<i.dialogs.Dialog.participants.Participant.length;l++)"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[l].mediaAddressType&&e++,"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[l].mediaAddressType&&"ALERTING"==i.dialogs.Dialog.participants.Participant[l].state&&(t=!0),"AGENT_DEVICE"==i.dialogs.Dialog.participants.Participant[l].mediaAddressType&&"DROPPED"==i.dialogs.Dialog.participants.Participant[l].state&&(n=!0);var a;if(t&&1==e&&(this.currentCustomerPhoneNumber=i.dialogs.Dialog.fromAddress,this.callAlerting=!0,this.notifyMe("Incomming Call","New Call from "+i.dialogs.Dialog.participants.Participant[1].mediaAddress)),null!==(l=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[13])&&void 0!==l&&l.value)if(2==e)this.currentCustomerPhoneNumber=null===(a=i.dialogs.Dialog.mediaProperties.callvariables.CallVariable[14])||void 0===a?void 0:a.value,this.callAlerting=!0;n&&(this.stopCallTiming(),this.activeCall=!1,this.onHold=!1,this.currentCustomerPhoneNumber=null,this.dialedNumber=null,this.queueName=null,this.loading=!1,this.callAlerting=!1,console.log("Dropped when Alerting"))}}else if(i.dialog){this.systemUp=!0,this.systemDownMessage=null;let t=!1;if(i.dialog.mediaProperties&&i.dialog.mediaProperties.callType)if("OFFERED"==i.dialog.mediaProperties.callType){t=!0;let e=0,l=!1;this.currentCallID=i.dialog.id,this.queueName=i.dialog.mediaProperties.queueName,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.currentCallCenter=i.dialog.mediaProperties.callvariables.CallVariable[1].value;let a=null,n=!1,s=!1,o=!1,r=!1;for(let t=0;t<i.dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&e++,"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension&&"HELD"==i.dialog.participants.Participant[t].state&&(n=!0),"ALERTING"==i.dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension&&(l=!0),"ACTIVE"==i.dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension&&(s=!0),"ACTIVE"==i.dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress!=this.agentExtension&&(a=i.dialog.participants.Participant[t].mediaAddress),"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress!=this.agentExtension&&"WRAP_UP"==i.dialog.participants.Participant[t].state&&(r=!0),"WRAP_UP"==i.dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension&&(o=!0);s&&0==this.activeCall?(this.callAlerting=!1,this.activeCall=!0,1!=this.directPreviewCampaign&&(this.wrapUpPending=!0),"DIRECT_PREVIEW_OUTBOUND"==i.dialog.mediaProperties.callvariables.CallVariable[13].value&&(this.currentCustomerPhoneNumber=i.dialog.mediaProperties.callvariables.CallVariable[14].value,this.sessionId=i.dialog.id,this.directPreviewCampaign=!0),this.campaignCallAlerting=!1,this.startCallTiming(),this.screenpop(this.currentCustomerPhoneNumber),this.callType=1,this.loggingCall(this.sessionId,this.currentCustomerPhoneNumber,1,"create",!1,null,null)):l&&2==e&&1!=this.directPreviewCampaign?(this.callAlerting=!0,this.currentCustomerPhoneNumber=i.dialog.fromAddress,this.notifyMe("Incomming Call","Called Forwarded from Agent: "+a+" for Customer: "+i.dialog.fromAddress)):n&&(this.onHold=!0),o&&(this.activeCall=!1,this.onHold=!1,this.loading=!1,this.dialedNumber=null,this.inWrapUpState=!0,this.directPreviewCampaign&&(this.campaignWrapUpPending=!0),this.loggingCall(null,null,2,"update",!1,null,this.callTimingSeconds+60*this.callTimingMinutes+3600*this.callTimingHour),this.stopCallTiming())}else if("OUT"==i.dialog.mediaProperties.callType){t=!0;let e=!1,l=!1,a=!1,s=!1,o=!1;this.currentCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,"FAILED"==i.dialog.participants.Participant.state&&(e=!0),"INITIATED"==i.dialog.participants.Participant.state&&(o=!0);for(let t=0;t<i.dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension?("ACTIVE"==i.dialog.participants.Participant[t].state&&(a=!0),"HELD"==i.dialog.participants.Participant[t].state&&(s=!0)):""==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress!=this.agentExtension&&"ACTIVE"==i.dialog.participants.Participant[t].state&&(l=!0);if(e){this.currentCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.callAlerting=!1,this.activeCall=!1,this.loading=!1,this.notifyMe("Outgoing Call","Outgoing Call failed");var n={errorCode:"CALL_FAILED"};this.contextGlobal.invokeAction("OutgoingCallError",n)}a&&l&&(this.dialedNumber=null,this.callAlerting=!1,this.activeCall=!0,this.startCallTiming(),this.callType=2,this.callCustomerPopup&&(this.callCustomerPopup.close(),this.callCustomerPopup=null),this.currentCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.callAlerting=!1,this.loading=!1,this.loggingCall(this.sessionId,this.currentCustomerPhoneNumber,1,"create",!1,null,null),this.notifyMe("Outgoing Call","Outgoing Call Started")),s&&(this.onHold=!0,this.activeCall=!0),o&&(this.loading=!1,this.notifyMe("Outgoing Call","Outgoing Call Initiated"),this.currentCustomerPhoneNumber=this.dialedNumber,this.outgoingCallInitiated=!0)}else if("CONSULT"==i.dialog.mediaProperties.callType){t=!0;let e=!1,l=!1,a=!1,n=!1,s=!1,o=!1,r=!1,c=!1;"object"===typeof i.dialog.participants.Participant&&("WRAP_UP"==i.dialog.participants.Participant.state&&(r=!0),"FAILED"==i.dialog.participants.Participant.state&&i.dialog.participants.Participant.mediaAddress==this.agentExtension&&(c=!0),"INITIATED"==i.dialog.participants.Participant.state&&(l=!0));for(let t=0;t<i.dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension?"INITIATED"==i.dialog.participants.Participant[t].state?l=!0:"ACTIVE"==i.dialog.participants.Participant[t].state?s=!0:"DROPPED"==i.dialog.participants.Participant[t].state?o=!0:"HELD"==i.dialog.participants.Participant[t].state?a=!0:"WRAP_UP"==i.dialog.participants.Participant[t].state&&(r=!0):i.dialog.participants.Participant[t].mediaAddress!=this.agentExtension&&("ALERTING"==i.dialog.participants.Participant[t].state?e=!0:"ACTIVE"==i.dialog.participants.Participant[t].state?(n=!0,this.consultCallNumber=i.dialog.participants.Participant[t].mediaAddress):"DROPPED"==i.dialog.participants.Participant[t].state&&(o=!0));e&&l&&!this.consultCallIniated?(this.callType=1,this.currentConsultCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.consultMessage="Consulting Initiated..",this.loading=!1,this.consultCallIniated=!0,this.notifyMe("Incomming Call","Called Consult Initiated "),this.mapConsultCallVariable(this.currentCallID,this.currentConsultCallID)):n&&s?(this.consultCallActive||this.startConsultCallTiming(),this.callType=1,this.consultCallIniated=!1,this.currentConsultCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.consultMessage="Consulting Started..",this.consultCallActive=!0,this.loading=!1,this.consultOnHold=!1,this.consultCallAlerting=!1,this.activeCall||this.loggingCall(this.currentConsultCallID,this.consultCallNumber,1,"create",!1,i.dialog.mediaProperties.callvariables.CallVariable[2].value,null)):l?(this.currentConsultCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.consultMessage="Consulting Initiated..",this.loading=!1,this.consultCallIniated=!0):s&&(this.consultOnHold=!1,this.consultCallAlerting=!1),a&&this.consultCallActive&&(this.consultOnHold=!0,this.consultMessage="Consult Call on Hold"),r&&(this.loggingCall(null,null,2,"update",!1,null,this.consultCallTimingSeconds+60*this.consultCallTimingMinutes+3600*this.consultCallTimingHour),this.stopConsultCallTiming(),this.consultCallIniated=!1,this.consultMessage=null,this.notifyMe("Consult Call","Consult Call Ended"),this.consultCallActive=!1,this.currentConsultCallID=null,this.dialedNumber=null,this.consultOnHold=!1,this.consultCallAlerting=!1,this.loading=!1,this.callType=null),c&&(this.consultCallIniated=!1,this.consultCallActive=!1,this.currentConsultCallID=null,this.dialedNumber=null,this.consultOnHold=!1,this.consultCallAlerting=!1,this.loading=!1,this.callType=null),o&&(this.consultCallIniated=!1,this.consultMessage=null,this.notifyMe("Consult Call","Consult Call Ended"),this.consultCallActive=!1,this.currentConsultCallID=null,this.dialedNumber=null,this.consultOnHold=!1,this.consultCallAlerting=!1,this.loading=!1,this.callType=null)}else if("AGENT_INSIDE"==i.dialog.mediaProperties.callType){t=!0;let e=!1,l=!1,a=!1,n=!1,s=!1,o=!1;"object"===typeof i.dialog.participants.Participant&&("WRAP_UP"==i.dialog.participants.Participant.state&&(s=!0),"FAILED"==i.dialog.participants.Participant.state&&i.dialog.participants.Participant.mediaAddress==this.agentExtension&&(o=!0),"INITIATED"==i.dialog.participants.Participant.state&&(e=!0));for(let t=0;t<i.dialog.participants.Participant.length;t++)"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress==this.agentExtension?"ACTIVE"==i.dialog.participants.Participant[t].state?n=!0:"HELD"==i.dialog.participants.Participant[t].state&&(l=!0):"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&i.dialog.participants.Participant[t].mediaAddress!=this.agentExtension&&"ACTIVE"==i.dialog.participants.Participant[t].state&&(a=!0,this.consultCallNumber=i.dialog.participants.Participant[t].mediaAddress);a&&n&&(this.activeCall=!1,this.callType=1,this.consultCallIniated=!1,this.currentConsultCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value,this.consultCallActive=!0,this.loading=!1,this.consultOnHold=!1,this.consultCallAlerting=!1,this.stopCallTiming(),this.startConsultCallTiming(),this.activeCall||this.loggingCall(this.currentConsultCallID,this.consultCallNumber,1,"create",!1,i.dialog.mediaProperties.callvariables.CallVariable[2].value,null)),l&&this.consultCallActive&&(this.consultOnHold=!0,this.consultMessage="Consult Call on Hold")}else if("OTHER_IN"==i.dialog.mediaProperties.callType){t=!0;i.dialog.mediaProperties.queueName&&(this.currentQueue=i.dialog.mediaProperties.queueName),this.currentCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value;let e=!0,l=!1,a=!1;for(let t=0;t<i.dialog.participants.Participant.length;t++)"ACTIVE"!=i.dialog.participants.Participant[t].state&&(e=!1),"HELD"==i.dialog.participants.Participant[t].state&&"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&(l=!0),"AGENT_DEVICE"==i.dialog.participants.Participant[t].mediaAddressType&&"WRAP_UP"==i.dialog.participants.Participant[t].state&&(a=!0);e&&0==this.activeCall?(this.currentCustomerPhoneNumber=i.dialog.fromAddress,this.directPreviewCampaign=!0,this.callAlerting=!1,this.activeCall=!0,this.consultCallIniated=!1,this.startCallTiming(),this.screenpop(this.currentCustomerPhoneNumber),this.callType=3,this.loggingCall(this.sessionId,this.currentCustomerPhoneNumber,1,"create",!1,null,null),this.campaignCallInitiated=!1,this.campaignCallAlerting=!1):l&&(this.currentCustomerPhoneNumber=i.dialog.fromAddress,this.onHold=!0,this.activeCall=!0),a&&(this.activeCall=!1,this.onHold=!1,this.currentCustomerPhoneNumber=null,this.dialedNumber=null,this.queueName=null,this.loading=!1,this.callAlerting=!1,this.contactId=null,this.incidentId=null,this.inWrapUpState=!0,this.loggingCall(null,null,2,"update",!1,null,this.callTimingSeconds+60*this.callTimingMinutes+3600*this.callTimingHour),this.stopCallTiming())}else if("OUTBOUND_DIRECT_PREVIEW"==i.dialog.mediaProperties.callType){let t=!1;"object"===typeof i.dialog.participants.Participant&&"ALERTING"==i.dialog.participants.Participant.state&&(t=!0),t&&(this.campaignCallAlerting=!0,this.directPreviewCampaign=!1,this.campaignCallMessage="",this.campaignCallID=i.dialog.id,this.campaignCallBuddyName=i.dialog.mediaProperties.callvariables.CallVariable[16].value.replace(","," "),this.currentCustomerPhoneNumber=i.dialog.mediaProperties.callvariables.CallVariable[14].value)}else if("OUTBOUND"==i.dialog.mediaProperties.callType){let t=!1,e=!1,l=!1;"object"===typeof i.dialog.participants.Participant&&("INITIATED"==i.dialog.participants.Participant.state&&(t=!0),"FAILED"==i.dialog.participants.Participant.state&&(e=!0));for(let a=0;a<i.dialog.participants.Participant.length;a++)"AGENT_DEVICE"==i.dialog.participants.Participant[a].mediaAddressType&&i.dialog.participants.Participant[a].mediaAddress==this.agentExtension&&"WRAP_UP"==i.dialog.participants.Participant[a].state&&(l=!0);"DIRECT_PREVIEW_OUTBOUND"==i.dialog.mediaProperties.callvariables.CallVariable[13].value&&(this.directPreviewCampaign=!0),"Agent-Predictive"==i.dialog.mediaProperties.callvariables.CallVariable[17].value&&(this.directPreviewCampaign=!0,this.predictiveCampaign=!0,this.currentCustomerPhoneNumber=i.dialog.mediaProperties.callvariables.CallVariable[13].value),t&&(this.campaignCallMessage="Campaign Call Initiated",this.campaignCallInitiated=!0,this.campaignCallID=i.dialog.id,this.campaignCallBuddyName=i.dialog.mediaProperties.callvariables.CallVariable[16].value.replace(","," "),this.currentCustomerPhoneNumber=i.dialog.mediaProperties.callvariables.CallVariable[14].value),l&&(this.campaignWrapUpPending=!0),e&&(this.campaignCallMessage="Campaign Call Failed",this.campaignCallEnd())}if(!t&&"ACTIVE"==i.dialog.state&&i.dialog.participants&&i.dialog.participants.Participant){i.dialog.mediaProperties.queueName&&(this.currentQueue=i.dialog.mediaProperties.queueName),this.currentCallID=i.dialog.id,this.sessionId=i.dialog.mediaProperties.callvariables.CallVariable[4].value;let t=!0,e=!1,l=!1;for(let a=0;a<i.dialog.participants.Participant.length;a++)"ACTIVE"!=i.dialog.participants.Participant[a].state&&(t=!1),"HELD"==i.dialog.participants.Participant[a].state&&"AGENT_DEVICE"==i.dialog.participants.Participant[a].mediaAddressType&&(e=!0),"AGENT_DEVICE"==i.dialog.participants.Participant[a].mediaAddressType&&"WRAP_UP"==i.dialog.participants.Participant[a].state&&(l=!0);var s;if(t&&0==this.activeCall)"OUTBOUND"!=i.dialog.mediaProperties.callType&&(this.currentCustomerPhoneNumber=i.dialog.fromAddress),i.dialog.mediaProperties.callvariables.CallVariable[17]&&"Agent-Predictive"==(null===(s=i.dialog.mediaProperties.callvariables.CallVariable[17])||void 0===s?void 0:s.value)&&(this.predictiveCampaign=!0,this.currentCustomerPhoneNumber=i.dialog.mediaProperties.callvariables.CallVariable[13].value),this.wrapUpPending=!0,this.callAlerting=!1,this.activeCall=!0,this.consultCallIniated=!1,this.startCallTiming(),this.screenpop(this.currentCustomerPhoneNumber),this.callType=1,this.loggingCall(this.sessionId,this.currentCustomerPhoneNumber,1,"create",!1,null,null),this.campaignCallInitiated=!1,this.campaignCallAlerting=!1;else e&&("OUTBOUND"!=i.dialog.mediaProperties.callType&&(this.currentCustomerPhoneNumber=i.dialog.fromAddress),this.onHold=!0,this.activeCall=!0);l&&(this.activeCall=!1,this.onHold=!1,this.currentCustomerPhoneNumber=null,this.dialedNumber=null,this.queueName=null,this.loading=!1,this.callAlerting=!1,this.contactId=null,this.incidentId=null,this.inWrapUpState=!0,this.loggingCall(null,null,2,"update",!1,null,this.callTimingSeconds+60*this.callTimingMinutes+3600*this.callTimingHour),this.stopCallTiming())}}else if(i.apiErrors){var o=i.apiErrors.apiError.errorType,r=i.apiErrors.apiError.errorMessage;if(o=o.toLowerCase().trim(),"generic unable to login"==o)switch(i.apiErrors.apiError.peripheralErrorText){case"The Unified CCX agent device is Off.":this.systemDownMessage="Please login into Cisco Jabber(softphone) and try again.",this.isError=!0;var c=this;setTimeout((function(){c.isError=!1}),1e4);break;default:this.systemUp=!1,this.loading=!1,this.systemDownMessage=i.apiErrors.apiError.peripheralErrorText}if("invalid device"==o&&"CF_INVALID_LOGON_DEVICE_SPECIFIED"==r){this.systemDownMessage="Your OSC staff account is connected with wrong cisco extension number. Please contact administrator to correct it.",this.isError=!0;let t=this;this.loading=!1,setTimeout((function(){t.isError=!1}),1e4)}"generic error"==i.apiErrors.apiError.errorType&&"CF_INVALID_DESTINATION"==i.apiErrors.apiError.errorMessage&&(this.notifyMe("Error","Wrong Number. Please enter correct number."),this.loading=!1)}},pickupCall:function(){this.listOfCurrentContacts=[],this.listOfCurrentIncident=[],this.selectedIncidentId=null,this.selectedContactId=null;let t=this.consultCallAlerting?this.currentConsultCallID:this.currentCallID;let e={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},i="<Dialog><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress><requestedAction>ANSWER</requestedAction></Dialog>";Vt.a.put(this.url+"Dialog/"+t,i,e).then(t=>{console.log(t),console.log("Call Picked up")}).catch(t=>{console.log(t)})},pickupCampaignCall:function(){let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},e="<Dialog><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress><requestedAction>"+(this.directPreviewCampaign?"ANSWER":"ACCEPT")+"</requestedAction></Dialog>";Vt.a.put(this.url+"Dialog/"+this.campaignCallID,e,t).then(t=>{console.log(t)}).catch(t=>{console.log(t)})},systemInfo:function(){let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}};return Vt.a.get(this.url+"SystemInfo",t)},reasonCodes:function(){this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}};Vt.a.get(this.url+"User/"+this.username+"/ReasonCodes?category=ALL",t).then(t=>{var e=t.data,i=Lt.a.parse(e),l=i.ReasonCodes.ReasonCode;this.logoutStatus=[],this.userStatus=[];for(var a=0;a<l.length;a++)0==l[a].forAll&&("LOGOUT"==l[a].category?this.logoutStatus.push({id:l[a].uri.split("/").pop(),label:l[a].label}):"NOT_READY"==l[a].category&&this.userStatus.push({id:l[a].uri.split("/").pop(),label:l[a].label}));console.log(this.logoutStatus),console.log(this.userStatus),this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})},login:function(t,e){this.loading=!0;let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+btoa(t+":"+e)}},l="<User><state>LOGIN</state><extension>"+this.agentExtension+"</extension></User>";Vt.a.put(this.url+"User/"+t,l,i).then(i=>{console.log(i),this.password=e,this.username=t,this.oauth=btoa(this.username+":"+this.password),this.loginPopup.close(),this.registerCustomerCallAction(),this.loading=!1}).catch(t=>{console.log(t),this.loginPopup.close(),this.loading=!1})},openLogin:function(){var t=this;this.loginPopup=this.IPopupWindowContext.createModalWindow("loginPopup"),this.loginPopup.setContentUrl("login.html"),this.loginPopup.setHeight("196px"),this.loginPopup.setTitle("CTI Login"),this.loginPopup.render().then((function(e){console.log(e),t.extensionProvider.getGlobalContext().then((function(e){t.loginActionSubscribed||e.registerAction("initiateLogin",(function(e){t.loginActionSubscribed=!0,t.eventConnect(e.username,e.password)}))}))}))},logout:function(){if("0"!=this.currentLogoutStatus){this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},e="<User><state>LOGOUT</state><reasonCodeId>"+this.currentLogoutStatus+"</reasonCodeId></User>";Vt.a.put(this.url+"User/"+this.username,e,t).then(t=>{console.log(t),this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})}},defaultLogout:function(t,e){let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+btoa(t+":"+e)}},l="<User><state>LOGOUT</state></User>";return Vt.a.put(this.url+"User/"+t,l,i)},statusChange:function(){this.loading=!0;let t=this.currentStatus;this.currentStatus=this.previousStatus;let e,i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}};e="ready"==t?"<User><state>READY</state></User>":"<User><state>NOT_READY</state><reasonCodeId>"+t+"</reasonCodeId></User>",Vt.a.put(this.url+"User/"+this.username,e,i).then(t=>{console.log(t),this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})},getUser:function(){this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}};Vt.a.get(this.url+"User/"+this.username,t).then(t=>{var e=t.data,i=Lt.a.parse(e);console.log(i),this.loggedIn=!0,this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})},getUserInfo:function(t,e){let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+btoa(t+":"+e)}};return Vt.a.get(this.url+"User/"+t,i)},startCallTiming:function(){clearInterval(this.timerReference),this.callTimingHour=0,this.callTimingMinutes=0,this.callTimingSeconds=0;var t=this;console.log("Value of Time Reference"),console.log(this.timerReference),this.timerReference=setInterval(()=>{t.callTimingSeconds++,60==t.callTimingSeconds&&(t.callTimingSeconds=0,t.callTimingMinutes++,60==t.callTimingMinutes&&(t.callTimingMinutes=0,t.callTimingHour++))},1e3)},startConsultCallTiming:function(){clearInterval(this.consultCallTimerReference),this.consultCallTimingHour=0,this.consultCallTimingMinutes=0,this.consultCallTimingSeconds=0;var t=this;console.log("Value of Time Reference"),console.log(this.consultCallTimerReference),this.consultCallTimerReference=setInterval(()=>{t.consultCallTimingSeconds++,60==t.consultCallTimingSeconds&&(t.consultCallTimingSeconds=0,t.consultCallTimingMinutes++,60==t.consultCallTimingMinutes&&(t.consultCallTimingMinutes=0,t.consultCallTimingHour++))},1e3)},stopConsultCallTiming:function(){clearInterval(this.consultCallTimerReference),this.consultCallTimingHour=0,this.consultCallTimingMinutes=0,this.consultCallTimingSeconds=0},stopCallTiming:function(){clearInterval(this.timerReference),this.callTimingHour=0,this.callTimingMinutes=0,this.callTimingSeconds=0},callEnd:function(t){let e=t?this.currentCallID:this.currentConsultCallID;this.loading=!0;let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},l="<Dialog><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress><requestedAction>DROP</requestedAction></Dialog>";Vt.a.put(this.url+"Dialog/"+e,l,i).then(t=>{console.log(t)}).catch(t=>{console.log(t),this.loading=!1})},campaignCallEnd:function(){this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},e="<Dialog><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress><requestedAction>"+(this.campaignCallInitiated?"DROP":"REJECT")+"</requestedAction></Dialog>";Vt.a.put(this.url+"Dialog/"+this.campaignCallID,e,t).then(t=>{console.log(t),this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})},putOnHold:function(t){let e=t?this.currentCallID:this.currentConsultCallID;let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},l="<Dialog><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress><requestedAction>HOLD</requestedAction></Dialog>";Vt.a.put(this.url+"Dialog/"+e,l,i).then(t=>{console.log(t),console.log("Call Hold up")}).catch(t=>{console.log(t)})},playFromHold:function(t){let e=t?this.currentCallID:this.currentConsultCallID;let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},l="<Dialog><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress><requestedAction>RETRIEVE</requestedAction></Dialog>";Vt.a.put(this.url+"Dialog/"+e,l,i).then(t=>{console.log(t),console.log("Call Resume up"),this.onHold=!1}).catch(t=>{console.log(t)})},openDialpad:function(){let t=this.IPopupWindowContext.createPopupWindow("dialPad");t.setContentUrl("dialpad.html"),t.setHeight("340px"),t.setTitle("Dialpad"),t.render()},consultCall:function(){if(null==this.dialedNumber||""==this.dialedNumber.trim()||4!=this.dialedNumber.trim().length)alert("Please enter correct number");else{this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},e="<Dialog><requestedAction>CONSULT_CALL</requestedAction><toAddress>"+this.dialedNumber.trim()+"</toAddress><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress></Dialog>";Vt.a.put(this.url+"Dialog/"+this.currentCallID,e,t).then(t=>{console.log(t),console.log("Call Consult Started")}).catch(t=>{console.log(t)})}},mapConsultCallVariable:function(t,e){let i={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},l="<Dialog><requestedAction>UPDATE_CALL_DATA</requestedAction><mediaProperties><callvariables><CallVariable><name>callVariable3</name><value>"+t+"</value></CallVariable></callvariables></mediaProperties></Dialog>";Vt.a.put(this.url+"Dialog/"+e,l,i).then(t=>{console.log(t),console.log("Call Variable Updated")}).catch(t=>{console.log(t)})},forwardCall:function(){if(null==this.dialedNumber||""==this.dialedNumber.trim()||4!=this.dialedNumber.trim().length)alert("Please enter the number");else{this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},e="<Dialog><requestedAction>TRANSFER_SST</requestedAction><toAddress>"+this.dialedNumber.trim()+"</toAddress><targetMediaAddress>"+this.agentExtension+"</targetMediaAddress></Dialog>";Vt.a.put(this.url+"Dialog/"+this.currentCallID,e,t).then(t=>{console.log(t),console.log("Call Forward Started")}).catch(t=>{console.log(t)})}},outgoingCall:function(){if(this.listOfCurrentContacts=[],this.listOfCurrentIncident=[],this.selectedIncidentId=null,this.selectedContactId=null,""!=this.dialedNumber&&null!=this.dialedNumber){this.loading=!0;let t={headers:{"Content-Type":"application/xml",Authorization:"Basic "+this.oauth}},e="<Dialog><requestedAction>MAKE_CALL</requestedAction><fromAddress>"+this.agentExtension+"</fromAddress><toAddress>"+this.dialedNumber+"</toAddress></Dialog>";Vt.a.post(this.url+"User/"+this.username+"/Dialogs",e,t).then(t=>{console.log(t),console.log("Outgoing Call Started")}).catch(t=>{console.log(t)})}else alert("Please enter the number")},getExtensionNumber:function(){let t={headers:{authorization:"Session "+this.rnowSession,"OSvC-CREST-Application-Context":"CTIIntegration","Accept-Language":this.rnowLang}};return Vt.a.get(this.rnowRestURL+"/connect/v1.4/accounts/"+this.rnowAgentId,t)},screenpop:function(t){if(t=t.toString(),t.length>=10){t=t.slice(t.length-10),this.slicedPhoneNumber=t;let e=new FormData;e.append("phoneNum",t),e.append("token",this.rnowSession),Vt.a.post(this.interfaceUrl+"/php/custom/cticontacts.php",e).then(e=>{let i=e.data,l=this;0==i.multipleContacts?i.moreThanOneIncidentsOpen?i.contactId&&this.extensionProvider.registerWorkspaceExtension((function(t){t.editWorkspaceRecord("Contact",parseInt(i.contactId))})):null!=i.incidentId?this.extensionProvider.registerWorkspaceExtension((function(t){t.editWorkspaceRecord("Incident",parseInt(i.incidentId))})):null==i.incidentId&&null!=i.contactId&&this.extensionProvider.registerWorkspaceExtension((function(t){t.editWorkspaceRecord("Contact",i.contactId)})):1==i.multipleContacts?this.extensionProvider.registerAnalyticsExtension((function(e){e.createReport(100179).then((function(e){l.iExtensionReport=e;var i=e.getReportFilters(),a=i.getFilterList();a[0].setValue("%"+t+"%"),e.executeReport()}))})):this.extensionProvider.registerWorkspaceExtension((function(t){t.createWorkspaceRecord("Contact",l.newContactCallback)}))})}},newContactCallback:function(t){console.log("Entered in New Contact Call Back"),console.log("Current Call Center Value = "+this.currentCallCenter),"Public"==this.currentCallCenter?(console.log("Entered in New Contact Call Back + Public Call Center"),t.updateField("Contact.PhMobile",this.slicedPhoneNumber),t.updateField("Contact.C$publiccustomer",1)):"Media Markt"==this.currentCallCenter?(console.log("Entered in New Contact Call Back + Media Markt Center"),t.updateField("Contact.PhFax",this.slicedPhoneNumber),t.updateField("Contact.C$mediamarktcustomer",1)):"Public-Cyprus"==this.currentCallCenter?(console.log("Entered in New Contact Call Back + Cy "),t.updateField("Contact.PhAsst",this.slicedPhoneNumber),t.updateField("Contact.C$public_cy_customer",1)):(t.updateField("Contact.PhMobile",this.slicedPhoneNumber),console.log("Entered in New Contact Call Back + No Media Markt Center + Public Call Center"))},registerCustomerCallAction:function(){var t=this;this.workspaceSavingSubscribed||(t.workspaceSavingSubscribed=!0,t.contextGlobal.registerAction("Contact_saved",(function(e){console.log("Contact Workspace saved"),console.log(e);let i=!1;for(let l=0;l<t.listOfCurrentContacts.length;l++)t.listOfCurrentContacts[l].id==e.id&&(i=!0,t.listOfCurrentContacts[l].value=e.details);i||t.listOfCurrentContacts.push({id:e.id,value:e.details}),console.log(t.listOfCurrentContacts)})),t.contextGlobal.registerAction("Incident_saved",(function(e){console.log("Incident workspace saved"),console.log(e);let i=!1;for(let l=0;l<t.listOfCurrentIncident.length;l++)t.listOfCurrentIncident[l].id==e.id&&(i=!0,t.listOfCurrentIncident[l].value=e.details);i||t.listOfCurrentIncident.push({id:e.id,value:e.details}),console.log(t.listOfCurrentIncident)}))),this.callCustomerSubscribed||t.contextGlobal.registerAction("Call_Customer",(function(e){t.callCustomerSubscribed=!0,t.callCustomerPopup=t.IPopupWindowContext.createModalWindow("callCustomerPopup"),t.callCustomerPopup.setContentUrl("callCustomer.html"),t.callCustomerPopup.setHeight("250px"),t.callCustomerPopup.setWidth("400px"),t.callCustomerPopup.setTitle("Call Customer"),t.callCustomerPopup.render().then((function(e){t.phoneNumberSelectedSubscribed||(t.phoneNumberSelectedSubscribed=!0,t.contextGlobal.registerAction("PhoneNumberSelected",(function(e){t.dialedNumber=e.phone_number,t.outgoingCall()})))}))}))},loggingCall:function(t=null,e=null,i,l,a=!1,n=null,s=null){3!=this.callType&&1!=this.directPreviewCampaign&&1!=this.predictiveCampaign||(this.sessionId=this.currentCallID,t=this.currentCallID,this.callType=3);let o="/php/custom/cticalllog.php?CallID="+(null!=t?t:"")+"&CallType="+(null!=this.callType?this.callType:"")+"&StaffAccount="+this.rnowAgentId+"&CallerNumber="+e+"&Status="+i+"&RequestType="+l+"&CallDuration="+(null!=s?s:"")+"&ParentCallId="+(null!=n?n:""),r="/php/custom/cticalllog.php?IncidentId="+(null!=this.selectedIncidentId?this.selectedIncidentId:"")+"&ContactId="+(null!=this.selectedContactId?this.selectedContactId:"")+"&Status="+(null!=i?i:"")+"&RequestType="+l+"&CallLogId="+this.currentCallLogId+"&CallDuration="+(null!=s?s:"")+"&Disposition="+(this.disposition?this.disposition:"")+"&Comments="+(this.comments?this.comments:"");console.log(r);let c="create"==l?o:r;console.log(c),Vt.a.get(this.interfaceUrl+c).then(t=>{console.log(t),this.currentCallLogId=t.data.CallLogId,console.log("Call log Done: "+this.currentCallLogId),a&&(this.wrapUpPending=!1,this.campaignWrapUpPending=!1,this.currentCallLogId=null,this.listOfCurrentContacts=[],this.listOfCurrentIncident=[],this.selectedIncidentId=null,this.selectedContactId=null,this.comments=null,this.disposition=null)}).catch(t=>{console.log(t)})}}},Wt=i("6b0d"),Gt=i.n(Wt);const Ft=Gt()(Ht,[["render",_t]]);var qt=Ft;const Bt=Object(l["b"])(qt);Bt.mount("#barApp")},6672:function(t,e,i){}});
//# sourceMappingURL=index.d433c601.js.map